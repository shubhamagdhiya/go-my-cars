import{r,j as a,I as K,B as x,G as n,a as A,T as E}from"./index-CiOuKirm.js";import{P as I,D as T,C as G,A as _}from"./index-K4TRuiv_.js";import{u as k,a as F}from"./index-BlcXzX0V.js";import{u as M}from"./useTableFilters-CQ-XPJR7.js";const Q=()=>{const[g,m]=r.useState([]),[s,c]=r.useState({page:1,limit:10,totalPages:null,totalDocs:null}),u=e=>{E("success",(e==null?void 0:e.message)||"Car Deleted Successfully"),t()},{mutate:p}=k(u),j=e=>{p(e)},o=[],{search:d,searchInput:f,searchQueryParams:h,handleSearchChange:v,handleFilterChange:C}=M(o,s,c),{data:l,isPending:N,isError:b,isSuccess:y,refetch:t}=F({limit:s.limit,page:s.page,search:d,...h});r.useEffect(()=>{if(console.log("apiResponse",l),l){const{data:e}=l,{page:i,limit:D,totalPages:w,totalDocs:V}=e;console.log(e,"data"),m(e==null?void 0:e.docs),c({page:i,limit:D,totalPages:w,totalDocs:V})}},[l]),r.useEffect(()=>{t()},[s.page,s.limit,t,d,h]);const P=e=>c(i=>({...i,page:e})),S=[{accessorKey:"_id",header:({column:e})=>a.jsxs(x,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["ID",a.jsx(_,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>a.jsx("div",{children:a.jsx(G,{text:e.getValue("_id")})})},{accessorKey:"carName",header:"car Name",cell:({row:e})=>a.jsx("div",{children:e.getValue("carName")})},{accessorKey:"carModal",header:"car Modal",cell:({row:e})=>a.jsx("div",{children:e.getValue("carModal")})},{accessorKey:"carGear",header:"car Gear",cell:({row:e})=>a.jsx("div",{children:e.getValue("carGear")}),visible:!1},{accessorKey:"carSheet",header:"car Sheet",cell:({row:e})=>a.jsx("div",{children:e.getValue("carSheet")}),visible:!1},{accessorKey:"carPrice",header:"carPrice (hr) ",cell:({row:e})=>a.jsx("div",{children:e.getValue("carPrice")}),visible:!1},{accessorKey:"isAvailable",header:"isAvailable",cell:({row:e})=>a.jsx("div",{children:e.getValue("isAvailable")===!0?a.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:"Active"}):a.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:"Inactive"})}),visible:!1},{accessorKey:"location",header:"location",cell:({row:e})=>a.jsx("div",{children:e.getValue("location")}),visible:!1},{id:"actions",enableHiding:!1,cell:({row:e})=>a.jsxs("div",{className:"flex w-full gap-2",children:[a.jsx(n,{to:`/car/view/${e.original._id}`,className:"hover:underline",children:"View"}),a.jsx(n,{to:"#",className:"hover:underline text-red-500",onClick:()=>j(e.original._id),children:"Delete"})]})}];return a.jsxs("div",{children:[a.jsx(I,{title:"Cars"}),a.jsxs("div",{className:"border rounded-xl p-4 flex flex-col min-h-[700px]",children:[a.jsxs("div",{className:"flex justify-between mb-4 gap-2",children:[a.jsx("div",{className:"grid grid-cols-2 gap-3 flex-1",children:a.jsx(K,{placeholder:"Search Cars by carName",value:f,onChange:e=>v(e.target.value),className:"max-w-sm"})}),a.jsx(x,{asChild:!0,children:a.jsx(n,{to:"/car/create",children:"Create New Cars"})})]}),N&&a.jsx("div",{className:"h-[600px] flex items-center justify-center",children:a.jsx(A,{className:"mr-2 h-10 w-10 animate-spin"})}),b&&a.jsx("div",{className:"flex flex-1 items-center justify-center",children:a.jsx("p",{className:"text-red-500",children:"Error fetching car data"})}),y&&a.jsx(T,{data:g,columns:S,filters:o,page:s==null?void 0:s.page,totalPages:s==null?void 0:s.totalPages,onPageChange:P,handleFilter:C})]})]})};export{Q as default};
