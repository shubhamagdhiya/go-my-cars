import{c as m,r as h,j as e,I as d,m as p,L as l,B as g,a as y,u as j,l as w,T as f,b as N,d as b,e as v,N as L,t as E,o as k,s as c}from"./index-CiOuKirm.js";import{C as P,a as C,b as S,c as I}from"./card-Bdl2H8GB.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],M=m("EyeOff",F);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A=m("Eye",T),_=i=>({id:s,placeholder:t,register:a})=>{const[r,o]=h.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:s,type:r?"text":"password",placeholder:t,...a(s),className:"pr-10"}),e.jsx("button",{type:"button",onClick:()=>o(n=>!n),className:"absolute inset-y-0 right-3 flex items-center",children:r?e.jsx(M,{className:"h-5 w-5 text-gray-500"}):e.jsx(A,{className:"h-5 w-5 text-gray-500"})})]})},D=_(d),O=({onSubmit:i,register:s,errors:t,isLoading:a})=>e.jsx(p.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:e.jsxs(P,{className:"border border-border bg-card text-card-foreground",children:[e.jsx(C,{children:e.jsx(S,{className:"text-xl",children:"Admin Login"})}),e.jsx(I,{children:e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",type:"email",placeholder:"Enter your email",...s("email")}),t.email&&e.jsx("p",{className:"text-destructive text-sm",children:t.email.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"password",children:"Password"}),e.jsx(D,{id:"password",placeholder:"Enter your password",register:s}),t.password&&e.jsx("p",{className:"text-destructive text-sm",children:t.password.message})]}),e.jsx(g,{type:"submit",className:"w-full dark:text-white  text-white",variant:"default",children:a?e.jsx(y,{className:"animate-spin"}):"Login"})]})})]})}),B=i=>j({mutationFn:w,onSuccess:s=>{var o,n;if(console.log("Data",s),sessionStorage.setItem("userEmail",(n=(o=s==null?void 0:s.data)==null?void 0:o.adminDetails)==null?void 0:n.email),!(s!=null&&s.success)){f("destructive","Login Failed",(s==null?void 0:s.message)||"Invalid Email or Password!");return}const t=s==null?void 0:s.data,{token:a,...r}=t;a&&i(a,r)}}),z=k({email:c().email("Invalid email"),password:c().min(6,"Password must be at least 6 characters")});function $(){N();const{login:i,isAuthenticated:s}=b(),{mutate:t,isPending:a}=B(i),{register:r,handleSubmit:o,formState:{errors:n}}=v({resolver:E(z)});if(s)return e.jsx(L,{to:"/",replace:!0});const u=o(x=>{t(x)});return e.jsx(O,{onSubmit:u,register:r,errors:n,isLoading:a})}export{$ as default};
