import{r as i,j as e,B as d,G as P,a as C}from"./index-CiOuKirm.js";import{P as w,D as b,C as E,A}from"./index-K4TRuiv_.js";import{u as S}from"./useTableFilters-CQ-XPJR7.js";import{u as T}from"./index-C2_j2_kB.js";import{d as K}from"./dayjs.min-7BedNc8G.js";const R=()=>{const[m,x]=i.useState([]),[t,l]=i.useState({page:1,limit:10,totalPages:null,totalDocs:null}),c=[],{search:h,searchQueryParams:o,handleFilterChange:f}=S(c,t,l),{data:a,isPending:g,isError:p,isSuccess:u,refetch:n}=T({limit:t.limit,page:t.page,...o});i.useEffect(()=>{if(console.log("apiResponse",a),a){const{data:s}=a,{page:r,limit:v,totalPages:y,totalDocs:D}=s;console.log(s,"data"),x(s==null?void 0:s.docs),l({page:r,limit:v,totalPages:y,totalDocs:D})}},[a]),i.useEffect(()=>{n()},[t.page,t.limit,n,h,o]);const j=s=>l(r=>({...r,page:s})),N=[{accessorKey:"_id",header:({column:s})=>e.jsxs(d,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["ID",e.jsx(A,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{children:e.jsx(E,{text:s.getValue("_id")})})},{accessorKey:"title",header:"Title",cell:({row:s})=>e.jsx("div",{children:s.getValue("title")})},{accessorKey:"description",header:"Description",cell:({row:s})=>e.jsx("div",{children:s.getValue("description")})},{accessorKey:"createdAt",header:"Date",cell:({row:s})=>e.jsx("div",{className:"font-md rounded-md w-max px-2",children:K(s.getValue("createdAt")).format("DD MMMM, YYYY")})}];return e.jsxs("div",{children:[e.jsx(w,{title:"Notifications"}),e.jsxs("div",{className:"border rounded-xl p-4 flex flex-col min-h-[700px]",children:[e.jsxs("div",{className:"flex justify-between mb-4 gap-2",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3 flex-1"}),e.jsx(d,{asChild:!0,children:e.jsx(P,{to:"/notifications/create",children:"Add New Notification"})})]}),g&&e.jsx("div",{className:"h-[600px] flex items-center justify-center",children:e.jsx(C,{className:"mr-2 h-10 w-10 animate-spin"})}),p&&e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("p",{className:"text-red-500",children:"Error fetching notification data"})}),u&&e.jsx(b,{data:m,columns:N,filters:c,page:t==null?void 0:t.page,totalPages:t==null?void 0:t.totalPages,onPageChange:j,handleFilter:f})]})]})};export{R as default};
