import{r,j as a,I as C,a as w,B as S,G as D}from"./index-CiOuKirm.js";import{P as V,D as E,C as K,A as I}from"./index-K4TRuiv_.js";import{u as F}from"./useTableFilters-CQ-XPJR7.js";import{u as T}from"./index-DUoETkM5.js";const B=()=>{const[h,m]=r.useState([]),[s,i]=r.useState({page:1,limit:10,totalPages:null,totalDocs:null}),c=[],{search:n,searchInput:g,searchQueryParams:o,handleSearchChange:p,handleFilterChange:u}=F(c,s,i),{data:t,isPending:x,isError:f,isSuccess:j,refetch:d}=T({limit:s.limit,page:s.page,search:n,...o});r.useEffect(()=>{if(console.log("apiResponse",t),t){const{data:e}=t,{page:l,limit:y,totalPages:P,totalDocs:b}=e;console.log(e,"data"),m(e==null?void 0:e.docs),i({page:l,limit:y,totalPages:P,totalDocs:b})}},[t]),r.useEffect(()=>{d()},[s.page,s.limit,d,n,o]);const v=e=>i(l=>({...l,page:e})),N=[{accessorKey:"_id",header:({column:e})=>a.jsxs(S,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["ID",a.jsx(I,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>a.jsx("div",{children:a.jsx(K,{text:e.getValue("_id")})})},{accessorKey:"email",header:"email",cell:({row:e})=>a.jsx("div",{children:e.getValue("email")})},{accessorKey:"fullName",header:"Full Name",cell:({row:e})=>a.jsx("div",{children:e.getValue("fullName")})},{accessorKey:"phoneNumber",header:"Phone Number",cell:({row:e})=>a.jsx("div",{children:e.getValue("phoneNumber")}),visible:!1},{accessorKey:"detail",header:"detail",cell:({row:e})=>a.jsx("div",{children:e.getValue("detail")}),visible:!1},{accessorKey:"reply",header:"Status",cell:({row:e})=>{const l=e.getValue("reply");return a.jsx("div",{children:l?"Completed":"Pending"})}},{id:"actions",enableHiding:!1,cell:({row:e})=>a.jsx("div",{className:"flex w-full gap-2",children:a.jsx(D,{to:`/partner/view/${e.original._id}`,className:"hover:underline",children:"View"})})}];return a.jsxs("div",{children:[a.jsx(V,{title:"partners"}),a.jsxs("div",{className:"border rounded-xl p-4 flex flex-col min-h-[700px]",children:[a.jsx("div",{className:"flex justify-between mb-4 gap-2",children:a.jsx("div",{className:"grid grid-cols-2 gap-3 flex-1",children:a.jsx(C,{placeholder:"Search partner by email",value:g,onChange:e=>p(e.target.value),className:"max-w-sm"})})}),x&&a.jsx("div",{className:"h-[600px] flex items-center justify-center",children:a.jsx(w,{className:"mr-2 h-10 w-10 animate-spin"})}),f&&a.jsx("div",{className:"flex flex-1 items-center justify-center",children:a.jsx("p",{className:"text-red-500",children:"Error fetching partner data"})}),j&&a.jsx(E,{data:h,columns:N,filters:c,page:s==null?void 0:s.page,totalPages:s==null?void 0:s.totalPages,onPageChange:v,handleFilter:u})]})]})};export{B as default};
