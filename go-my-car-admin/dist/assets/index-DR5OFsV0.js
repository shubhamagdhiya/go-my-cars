import{r as c,j as s,I as K,D as k,E as m,B as l,z as B,F as H,T as R}from"./index-CiOuKirm.js";import{P as F,D as L,C as p,A as h}from"./index-K4TRuiv_.js";import{u as $,a as z}from"./useUsers-Dtt3s6e2.js";const M=()=>{const[v,f]=c.useState([]),[n,j]=c.useState(""),[A,o]=c.useState(""),[a,i]=c.useState({page:1,limit:10,totalPages:null,totalDocs:null});console.log("pagination",a);const{data:r,isPending:y,isError:C,isSuccess:S,refetch:d}=$({limit:a.limit,page:a.page,search:n});console.log("apiResponse",r);const U=e=>{R("success",(e==null?void 0:e.message)||"User updated successfully")},{mutate:I,isSuccess:N}=z(U);c.useEffect(()=>{if(r){const{data:e}=r,{page:t,limit:O,totalPages:V,totalDocs:_}=e;f(e.docs),i({page:t,limit:O,totalPages:V,totalDocs:_})}},[r]),c.useEffect(()=>{d()},[a.page,a.limit,d,N]);const P=e=>{i(t=>({...t,page:e}))},b=e=>{j(e),i(t=>({...t,page:1}))},u=e=>{const t={userId:A,isActive:e};I(t),console.log("Payload:>>",t)},[T,g]=c.useState(!1),[D,x]=c.useState(!1),E=[{accessorKey:"_id",header:({column:e})=>s.jsxs(l,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["ID",s.jsx(h,{className:"ml-2 h-4 w-4"})]}),cell:({row:e})=>s.jsx("div",{children:s.jsx(p,{text:e.getValue("_id")})})},{accessorKey:"fullName",header:"Full Name",cell:({row:e})=>s.jsx("div",{children:e.getValue("fullName")})},{accessorKey:"phoneNumber",header:"Phone Number",cell:({row:e})=>s.jsxs("div",{children:[" ",s.jsx(p,{text:e.getValue("phoneNumber"),textStyle:"font-semibold"})]})},{accessorKey:"email",header:({column:e})=>s.jsxs(l,{variant:"ghost",onClick:()=>e.toggleSorting(e.getIsSorted()==="asc"),children:["Email",s.jsx(h,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"isActive",header:"isActive",cell:({row:e})=>s.jsx("div",{children:e.getValue("isActive")===!0?s.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:"Active"}):s.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:"Inactive"})})},{accessorKey:"profilePic",header:"Profile Image",cell:({row:e})=>{const t=`${B}/static/${e.getValue("profilePic")}`;return s.jsx("img",{src:t,alt:"Profile",className:"h-10 w-10 rounded-full object-cover"})}},{id:"actions",enableHiding:!1,cell:({row:e})=>{const t=e.original;return s.jsx("div",{className:"flex w-full items-center justify-center space-x-3",children:e.getValue("isActive")===H.ACTIVE?s.jsx(l,{variant:"destructive",onClick:()=>{g(!0),o(t._id)},children:"InActive"}):s.jsx(l,{variant:"default",onClick:()=>{x(!0),o(t._id)},children:"Activate"})})}}],w=[];return s.jsxs("div",{children:[s.jsx(F,{title:"Users"}),s.jsxs("div",{className:"border rounded-xl p-4 flex flex-start flex-col min-h-[700px] ",children:[C&&s.jsx("div",{className:"flex flex-1 items-center justify-center",children:s.jsx("p",{className:"text-red-500",children:"Error fetching data"})}),s.jsx(K,{placeholder:"Search users by full name",value:n,onChange:e=>b(e.target.value),className:"max-w-sm"}),y&&s.jsx("div",{className:"h-[700px]",children:s.jsx(k,{})}),S&&s.jsx(L,{data:v,columns:E,filters:w,page:a==null?void 0:a.page,totalPages:a==null?void 0:a.totalPages,onPageChange:P})]}),s.jsx(m,{title:"Are you sure you want Active this User?",description:"",confirmText:"Activate User",cancelText:"Cancel",onConfirm:()=>u(!0),confirmButtonClass:"bg-primary  hover:bg-primary-600",open:D,setOpen:x}),s.jsx(m,{title:"Are you sure you want In Active this User?",description:"",confirmText:"InActive User",cancelText:"Cancel",onConfirm:()=>u(!1),confirmButtonClass:"bg-destructive text-white hover:bg-red-600",open:T,setOpen:g})]})};export{M as default};
