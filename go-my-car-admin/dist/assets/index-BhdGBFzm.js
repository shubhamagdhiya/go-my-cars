import{b as S,e as w,t as F,o as C,r as B,H as T,j as e,B as i,I,J as P,K as k,M as E,T as L}from"./index-CiOuKirm.js";import{F as U,a as A,b as D,c as R,d as M,e as V,f as $}from"./form-D9IExxpP.js";import{S as H,P as J,T as K}from"./switch-DQHW1aF0.js";import{c as O}from"./index-DYJYlM-b.js";import{o as q}from"./helper-CbO53uKL.js";const z=C({isSelected:k().default(!1),images:P(E())}).strict(),_=()=>{const o=S(),x=s=>{L("success",(s==null?void 0:s.message)||"Banner Added Successfully"),o("/banner")},{mutate:f,isPending:l}=O(x),r=w({resolver:F(z),defaultValues:{isSelected:!1}}),{control:p,register:u}=r,[m,d]=B.useState({}),{fields:h,append:j,remove:b}=T({control:p,name:"images"});function v(s){console.log("data",s);const a=new FormData;a.append("isSelected",s.isSelected),s.images&&s.images.forEach((n,c)=>{const t=n instanceof FileList?n[0]:n;t instanceof File&&a.append("images",t)}),f(a)}return e.jsxs("div",{className:"container  ",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create New Banner"}),e.jsx(U,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(v,q),className:"space-y-8 w-full max-w-5xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(A,{control:r.control,name:"isSelected",render:({field:s})=>e.jsxs(D,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(R,{className:"text-base",children:"isSelected"}),e.jsx(M,{children:"Toggle to activate or deactivate the isSelected"})]}),e.jsx(V,{children:e.jsx(H,{checked:s.value,onCheckedChange:a=>s.onChange(a)})})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block font-medium",children:"Upload Images"}),e.jsxs(i,{type:"button",variant:"secondary",onClick:()=>j(null),className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Add Image"]}),e.jsx($,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((s,a)=>{var n;return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(I,{type:"file",accept:"image/*",...u(`images.${a}`),onChange:c=>{var g;const t=(g=c.target.files)==null?void 0:g[0];if(t){const y=URL.createObjectURL(t);d(N=>({...N,[a]:y}))}}}),m[a]&&e.jsx("img",{src:m[a],alt:`Preview ${a}`,className:"w-32 h-32 object-cover border rounded"}),typeof((n=r.formState.errors.image)==null?void 0:n.message)=="string"&&e.jsx("p",{className:"text-red-500 text-sm",children:r.formState.errors.image.message}),e.jsx(i,{type:"button",variant:"ghost",onClick:()=>{b(a),d(c=>{const t={...c};return delete t[a],t})},className:"px-2 w-fit text-red-600",children:e.jsx(K,{className:"h-4 w-4"})})]},s.id)})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>o("/banner"),children:"Cancel"}),e.jsx(i,{type:"submit",disabled:l,children:l?"Creating...":"Create Banner"})]})]})})]})};export{_ as default};
