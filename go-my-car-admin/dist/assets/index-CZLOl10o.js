import{r as a,j as e,B as l,G as o,a as k,E as v,T as V}from"./index-CiOuKirm.js";import{P as F,D as R,C as G,A as H}from"./index-K4TRuiv_.js";import{u as K,a as L,b as Q}from"./index-DYJYlM-b.js";import{u as $}from"./useTableFilters-CQ-XPJR7.js";const W=()=>{const[j,y]=a.useState([]),[t,r]=a.useState({page:1,limit:10,totalPages:null,totalDocs:null}),[C,d]=a.useState(!1),[A,u]=a.useState(!1),x=s=>{V("success",(s==null?void 0:s.message)||"carbanner deleted successfully"),c()},{mutate:b}=K(x),[B,m]=a.useState(""),N=s=>{b(s)},g=[],{search:p,searchQueryParams:h,handleFilterChange:S}=$(g,t,r),{data:i,isPending:D,isError:I,isSuccess:P,refetch:c}=L({limit:t.limit,page:t.page,search:p,...h});a.useEffect(()=>{if(console.log("apiResponse",i),i){const{data:s}=i,{page:n,limit:U,totalPages:O,totalDocs:_}=s;console.log(s,"data1"),y(s.docs),r({page:n,limit:U,totalPages:O,totalDocs:_})}},[i]),a.useEffect(()=>{c()},[t.page,t.limit,c,p,h]);const{mutate:T}=Q(x),f=s=>{const n={userId:B,isSelected:s};T(n),console.log("Payload:>>",n)},w=s=>r(n=>({...n,page:s})),E=[{accessorKey:"_id",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["ID",e.jsx(H,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{children:e.jsx(G,{text:s.getValue("_id")})})},{accessorKey:"isSelected",header:"isSelected",cell:({row:s})=>e.jsx("div",{children:s.getValue("isSelected")===!0?e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:"Active"}):e.jsx("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:"Inactive"})}),visible:!1},{id:"actions",enableHiding:!1,cell:({row:s})=>e.jsxs("div",{className:"flex w-full gap-2",children:[e.jsx("div",{className:"flex w-full items-center justify-center space-x-3",children:s.getValue("isSelected")===!0?e.jsx(l,{variant:"destructive",onClick:()=>{d(!0),m(s.original._id)},children:"InActive"}):e.jsx(l,{variant:"default",onClick:()=>{u(!0),m(s.original._id)},children:"Activate"})}),e.jsx(o,{to:`/banner/view/${s.original._id}`,className:"hover:underline",children:"View"}),e.jsx(o,{to:"#",className:"hover:underline text-red-500",onClick:()=>N(s.original._id),children:"Delete"})]})}];return e.jsxs("div",{children:[e.jsx(F,{title:"Banners"}),e.jsxs("div",{className:"border rounded-xl p-4 flex flex-col min-h-[700px]",children:[e.jsxs("div",{className:"flex justify-between mb-4 gap-2",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3 flex-1"}),e.jsx(l,{asChild:!0,children:e.jsx(o,{to:"/banner/create",children:"Create New Banner"})})]}),D&&e.jsx("div",{className:"h-[600px] flex items-center justify-center",children:e.jsx(k,{className:"mr-2 h-10 w-10 animate-spin"})}),I&&e.jsx("div",{className:"flex flex-1 items-center justify-center",children:e.jsx("p",{className:"text-red-500",children:"Error fetching car data"})}),P&&e.jsx(R,{data:j,columns:E,filters:g,page:t==null?void 0:t.page,totalPages:t==null?void 0:t.totalPages,onPageChange:w,handleFilter:S}),e.jsx(v,{title:"Are you sure you want Active this Banner?",description:"",confirmText:"Activate Banner",cancelText:"Cancel",onConfirm:()=>f(!0),confirmButtonClass:"bg-primary  hover:bg-primary-600",open:A,setOpen:u}),e.jsx(v,{title:"Are you sure you want In Active this Banner?",description:"",confirmText:"InActive Banner",cancelText:"Cancel",onConfirm:()=>f(!1),confirmButtonClass:"bg-destructive text-white hover:bg-red-600",open:C,setOpen:d})]})]})};export{W as default};
