import{b as K,e as Q,t as Y,o as z,r as X,H as w,j as e,I as o,Q as Z,V as W,B as u,J as D,K as g,s as x,W as f,M as ee,T as re}from"./index-CiOuKirm.js";import{F as ae,a as t,b as n,c,e as l,d,f as i}from"./form-D9IExxpP.js";import{S as T,P as q,T as E}from"./switch-DQHW1aF0.js";import{S as A,a as F,b as P,c as I,d as k}from"./select-BkN_i5Bb.js";import{b as se}from"./index-BlcXzX0V.js";import{o as te}from"./helper-CbO53uKL.js";const ne=z({carName:x({required_error:"carName is required"}).min(1,"carName cannot be empty").max(50,"carName must be 50 characters or less").toUpperCase().trim(),carModal:f({required_error:"carModal Value is required"}),carGear:x({required_error:"carGear is required"}),carType:x({required_error:"carType is required"}),carSheet:f({required_error:"carSheet Value is required"}).min(1,"carSheet cannot be empty"),carPrice:f({required_error:"carPrice Value is required"}).min(1,"carPrice cannot be empty"),startDate:x({required_error:"Start Date is required"}).transform(m=>new Date(m)),endDate:x({required_error:"End Date is required"}).refine(m=>!isNaN(Date.parse(m)),{message:"Invalid End Date format"}).transform(m=>new Date(m)),fastag:g().default(!1),isAvailable:g().default(!0),location:x().min(1,"Location is required"),hostName:x().min(1,"Host name is required"),isActive:g().optional(),feature:D(x().min(1,"Each feature must not be empty")).min(1,"At least one feature is required"),images:D(ee())}).strict(),he=()=>{var y;const m=K(),V=r=>{re("success",(r==null?void 0:r.message)||"Car Added Successfully"),m("/car")},{mutate:M,isPending:b}=se(V),s=Q({resolver:Y(ne),defaultValues:{carName:"",carModal:void 0,carGear:void 0,carType:void 0,carSheet:void 0,carPrice:void 0,fastag:!1,isAvailable:!1,startDate:new Date().toISOString().split("T")[0],endDate:"",location:"",hostName:"",isActive:!0,feature:[]}}),{control:_,register:N}=s,[v,C]=X.useState({}),{fields:G,append:U,remove:O}=w({control:s.control,name:"feature"}),{fields:R,append:L,remove:$}=w({control:_,name:"images"});function B(r){console.log("data",r);const a=new FormData;a.append("carName",r.carName),a.append("carModal",r.carModal),a.append("carGear",r.carGear),a.append("carType",r.carType),a.append("carSheet",r.carSheet),a.append("carPrice",r.carPrice),a.append("fastag",r.fastag),a.append("isAvailable",r.isAvailable),a.append("hostName",r.hostName),a.append("startDate",new Date(r.startDate).toISOString()),a.append("endDate",new Date(r.endDate).toISOString()),a.append("location",r.location),a.append("feature",r.feature),r.images&&r.images.forEach((j,p)=>{const h=j instanceof FileList?j[0]:j;h instanceof File&&a.append("images",h)}),M(a)}return e.jsxs("div",{className:"container  ",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create New Car"}),e.jsx(ae,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(B,te),className:"space-y-8 w-full max-w-5xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(t,{control:s.control,name:"carName",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"Car Name"}),e.jsx(l,{children:e.jsx(o,{placeholder:"Enter Car Name",...r})}),e.jsx(d,{children:"Unique name for the car (max 50 characters)"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"carModal",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"car Modal"}),e.jsx(l,{children:e.jsx(o,{type:"number",placeholder:"Enter Car Modal",...r,onChange:a=>r.onChange(Number(a.target.value))})}),e.jsx(d,{children:"Enter car modal"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"carGear",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"carGear"}),e.jsxs(A,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(l,{children:e.jsx(F,{children:e.jsx(P,{placeholder:"Select Car Gear"})})}),e.jsx(I,{children:Object.values(Z).map(a=>e.jsx(k,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),e.jsx(d,{children:"Select car gear"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"carType",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"carType"}),e.jsxs(A,{onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(l,{children:e.jsx(F,{children:e.jsx(P,{placeholder:"Select Car Type"})})}),e.jsx(I,{children:Object.values(W).map(a=>e.jsx(k,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),e.jsx(d,{children:"Select car type"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"carSheet",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"car Sheet"}),e.jsx(l,{children:e.jsx(o,{type:"number",placeholder:"Enter car Sheet",...r,onChange:a=>r.onChange(Number(a.target.value))})}),e.jsx(d,{children:"Enter car sheet"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"carPrice",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"car Price (hr)"}),e.jsx(l,{children:e.jsx(o,{type:"number",placeholder:"Enter car Price",...r,onChange:a=>r.onChange(Number(a.target.value))})}),e.jsx(d,{children:"Enter car price"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"fastag",render:({field:r})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base",children:"fastag"}),e.jsx(d,{children:"Toggle to activate or deactivate the fastag"})]}),e.jsx(l,{children:e.jsx(T,{checked:r.value,onCheckedChange:a=>r.onChange(a)})})]})}),e.jsx(t,{control:s.control,name:"isAvailable",render:({field:r})=>e.jsxs(n,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base",children:"isAvailable"}),e.jsx(d,{children:"Toggle to activate or deactivate the car"})]}),e.jsx(l,{children:e.jsx(T,{checked:r.value,onCheckedChange:a=>r.onChange(a)})})]})}),e.jsx(t,{control:s.control,name:"startDate",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"Start Date"}),e.jsx(l,{children:e.jsx(o,{type:"date",...r})}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"endDate",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"End Date"}),e.jsx(l,{children:e.jsx(o,{type:"date",...r})}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"location",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"location"}),e.jsx(l,{children:e.jsx(o,{placeholder:"Enter location",...r})}),e.jsx(d,{children:"Choose car location"}),e.jsx(i,{})]})}),e.jsx(t,{control:s.control,name:"hostName",render:({field:r})=>e.jsxs(n,{children:[e.jsx(c,{children:"hostName"}),e.jsx(l,{children:e.jsx(o,{placeholder:"Enter hostName",...r})}),e.jsx(d,{children:"Choose hostName"}),e.jsx(i,{})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block",children:"feature"}),e.jsxs(u,{type:"button",variant:"secondary",onClick:()=>U(""),className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Add feature"]})]}),typeof((y=s.formState.errors.feature)==null?void 0:y.message)=="string"&&e.jsx("p",{className:"text-red-500 text-sm",children:s.formState.errors.feature.message}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:G.map((r,a)=>e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsx(o,{...N(`feature.${a}`),placeholder:`Feature ${a+1}`}),e.jsx(u,{type:"button",variant:"ghost",onClick:()=>O(a),className:"px-2 w-fit text-red-600",children:e.jsx(E,{className:"h-4 w-4"})})]},r.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"block font-medium",children:"Upload Images"}),e.jsxs(u,{type:"button",variant:"secondary",onClick:()=>L(null),className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4"}),"Add Image"]}),e.jsx(i,{})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map((r,a)=>{var j;return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(o,{type:"file",accept:"image/*",...N(`images.${a}`),onChange:p=>{var S;const h=(S=p.target.files)==null?void 0:S[0];if(h){const H=URL.createObjectURL(h);C(J=>({...J,[a]:H}))}}}),v[a]&&e.jsx("img",{src:v[a],alt:`Preview ${a}`,className:"w-32 h-32 object-cover border rounded"}),typeof((j=s.formState.errors.image)==null?void 0:j.message)=="string"&&e.jsx("p",{className:"text-red-500 text-sm",children:s.formState.errors.image.message}),e.jsx(u,{type:"button",variant:"ghost",onClick:()=>{$(a),C(p=>{const h={...p};return delete h[a],h})},className:"px-2 w-fit text-red-600",children:e.jsx(E,{className:"h-4 w-4"})})]},r.id)})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>m("/car"),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:b,children:b?"Creating...":"Create Car"})]})]})})]})};export{he as default};
